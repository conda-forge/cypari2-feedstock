From a07e4318fa9602ed226690af140f91d2a263058d Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Julian=20R=C3=BCth?= <julian.rueth@fsfe.org>
Date: Mon, 26 Jan 2026 23:46:21 +0100
Subject: [PATCH 1/4] Find cysignals without executing import cysignals

---
 meson.build | 19 ++++---------------
 1 file changed, 4 insertions(+), 15 deletions(-)

diff --git a/meson.build b/meson.build
index f002877..f73517c 100644
--- a/meson.build
+++ b/meson.build
@@ -19,22 +19,10 @@ add_project_arguments('-X c_api_binop_methods=True', language: 'cython')
 run_command(cc, '-v', check:true)
 
 # Dependencies  
-inc_cysignals = run_command(
-  py,
-  [
-    '-c',
-    '''
-from os.path import relpath
-import cysignals
-path = cysignals.__file__.replace('__init__.py', '')
-try:
-  print(relpath(path))
-except Exception:
-  print(path)
-    '''.strip(),
-  ],
-  check: true,
-).stdout().strip()
+inc_cysignals = get_option('cysignals_incdir')
+if inc_cysignals == ''
+  inc_cysignals = join_paths(py.get_install_dir(), 'cysignals')
+endif
 cysignals = declare_dependency(include_directories: inc_cysignals)
 
 # Find PARI
-- 
2.52.0

